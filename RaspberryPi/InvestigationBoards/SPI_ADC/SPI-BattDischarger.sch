EESchema Schematic File Version 2  date Tue 05 Feb 2013 20:32:30 GMT
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:special
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:1wire
LIBS:SPI-BattDischarger-cache
EELAYER 25  0
EELAYER END
$Descr A4 11700 8267
encoding utf-8
Sheet 1 1
Title ""
Date "5 feb 2013"
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
NoConn ~ 8550 4150
NoConn ~ 8550 4050
NoConn ~ 8550 3950
NoConn ~ 8550 3850
NoConn ~ 8550 3750
NoConn ~ 8550 3650
NoConn ~ 7750 3750
NoConn ~ 8550 3550
NoConn ~ 8550 3450
NoConn ~ 7750 3350
NoConn ~ 7750 3150
NoConn ~ 7750 3050
NoConn ~ 8550 3050
Wire Wire Line
	6600 3700 7050 3700
Wire Wire Line
	8550 3350 8650 3350
Wire Wire Line
	7750 3550 7400 3550
Wire Bus Line
	3500 600  4500 600 
Wire Bus Line
	3500 600  3500 2400
Wire Bus Line
	3500 2400 4500 2400
Wire Bus Line
	4500 2400 4500 600 
Wire Wire Line
	4300 1250 4300 1300
Wire Wire Line
	3650 2000 4000 2000
Wire Wire Line
	4300 1700 4300 1800
Wire Wire Line
	4300 2200 4300 2300
Wire Wire Line
	5550 2200 5550 2300
Wire Wire Line
	5550 1700 5550 1800
Wire Wire Line
	4900 2000 5250 2000
Wire Wire Line
	5550 1250 5550 1300
Wire Bus Line
	5750 2400 5750 600 
Wire Bus Line
	5750 2400 4750 2400
Wire Bus Line
	4750 2400 4750 600 
Wire Bus Line
	4750 600  5750 600 
Wire Bus Line
	5950 600  6950 600 
Wire Bus Line
	5950 600  5950 2400
Wire Bus Line
	5950 2400 6950 2400
Wire Bus Line
	6950 2400 6950 600 
Wire Wire Line
	6750 1250 6750 1300
Wire Wire Line
	7850 1900 7850 2000
Wire Wire Line
	7850 800  7850 900 
Wire Wire Line
	750  2600 950  2600
Wire Wire Line
	750  1500 950  1500
Connection ~ 1900 1200
Wire Wire Line
	2100 1200 1800 1200
Wire Wire Line
	1100 1200 1300 1200
Wire Wire Line
	1500 6700 1800 6700
Wire Wire Line
	1500 6800 1600 6800
Wire Wire Line
	1500 6400 1600 6400
Wire Wire Line
	1500 6000 1600 6000
Wire Wire Line
	1500 6300 1800 6300
Connection ~ 6900 3250
Wire Wire Line
	6350 3250 7750 3250
Connection ~ 9100 1450
Connection ~ 9650 1450
Wire Wire Line
	9650 1450 8850 1450
Connection ~ 9100 1050
Wire Wire Line
	8850 1050 9250 1050
Connection ~ 7750 4300
Wire Wire Line
	6600 4300 8250 4300
Connection ~ 6650 4800
Wire Wire Line
	4000 4800 7700 4800
Wire Wire Line
	7700 4800 7700 4700
Connection ~ 6850 5200
Wire Wire Line
	4000 5200 7250 5200
Connection ~ 5250 4500
Connection ~ 5250 4900
Wire Wire Line
	5250 4500 5250 4900
Connection ~ 6750 4300
Wire Wire Line
	7750 4300 7750 4150
Connection ~ 6900 4000
Wire Wire Line
	7750 3850 7650 3850
Wire Wire Line
	7650 3850 7650 4000
Wire Wire Line
	7650 4000 6600 4000
Connection ~ 7000 4050
Wire Wire Line
	7750 4050 7000 4050
Wire Wire Line
	9650 1350 9650 1500
Wire Wire Line
	4000 3800 5350 3800
Wire Wire Line
	4000 4000 5350 4000
Wire Wire Line
	4000 4200 5350 4200
Wire Wire Line
	4000 4400 5350 4400
Wire Wire Line
	4000 4600 5350 4600
Wire Wire Line
	4000 5500 7000 5500
Wire Wire Line
	7000 5500 7000 3800
Wire Wire Line
	7000 3800 6600 3800
Wire Wire Line
	4000 5300 6900 5300
Wire Wire Line
	6900 5300 6900 4000
Wire Wire Line
	4000 5100 6800 5100
Wire Wire Line
	6800 5100 6800 4200
Wire Wire Line
	6700 4400 6700 4900
Wire Wire Line
	6700 4900 4000 4900
Wire Wire Line
	4000 4700 5450 4700
Wire Wire Line
	5450 4700 5450 4750
Wire Wire Line
	5450 4750 6600 4750
Wire Wire Line
	6600 4750 6600 4600
Wire Wire Line
	9700 5900 9950 5900
Wire Wire Line
	9700 6100 9950 6100
Wire Wire Line
	9400 6000 9950 6000
Wire Wire Line
	5350 3700 4000 3700
Wire Wire Line
	6600 4500 6650 4500
Wire Wire Line
	6650 4500 6650 4800
Wire Wire Line
	6750 4300 6750 5000
Wire Wire Line
	6750 5000 4000 5000
Wire Wire Line
	6600 4100 6850 4100
Wire Wire Line
	6850 4100 6850 5200
Wire Wire Line
	6950 3900 6950 5400
Wire Wire Line
	6950 5400 4000 5400
Wire Wire Line
	4000 5600 7050 5600
Wire Wire Line
	4000 4500 5350 4500
Wire Wire Line
	5350 4300 4000 4300
Wire Wire Line
	5350 4100 4000 4100
Wire Wire Line
	5350 3900 4000 3900
Wire Wire Line
	8550 3150 8650 3150
Wire Wire Line
	6600 4200 7700 4200
Wire Wire Line
	7700 4200 7700 3950
Wire Wire Line
	7700 3950 7750 3950
Connection ~ 6800 4200
Wire Wire Line
	7750 3650 7600 3650
Wire Wire Line
	7600 3650 7600 3900
Wire Wire Line
	7600 3900 6600 3900
Connection ~ 6950 3900
Connection ~ 6750 4400
Connection ~ 6700 4400
Wire Wire Line
	7050 2950 7750 2950
Connection ~ 7050 3700
Wire Wire Line
	7350 4700 6600 4700
Connection ~ 6600 4700
Wire Wire Line
	8250 4700 8250 4850
Wire Wire Line
	8250 4850 7050 4850
Connection ~ 7050 4850
Wire Wire Line
	8850 1450 8850 1250
Wire Wire Line
	7050 5600 7050 2750
Connection ~ 7050 2950
Wire Wire Line
	7050 2750 6900 2750
Wire Wire Line
	1500 6100 1800 6100
Wire Wire Line
	1500 6500 1800 6500
Wire Wire Line
	1500 6200 1600 6200
Wire Wire Line
	1500 6600 1600 6600
Wire Notes Line
	8300 1600 8300 600 
Wire Notes Line
	8300 1600 11100 1600
Wire Notes Line
	11100 1600 11100 600 
Wire Notes Line
	11100 600  8300 600 
Wire Wire Line
	1900 1600 2100 1600
Wire Wire Line
	1900 2150 2100 2150
Wire Wire Line
	1100 1750 1300 1750
Wire Wire Line
	2100 1750 1800 1750
Connection ~ 1900 1750
Connection ~ 1900 2850
Wire Wire Line
	2100 2850 1800 2850
Wire Wire Line
	1100 2850 1300 2850
Wire Wire Line
	1900 3250 2100 3250
Wire Wire Line
	1900 2700 2100 2700
Wire Wire Line
	1100 2300 1300 2300
Wire Wire Line
	2100 2300 1800 2300
Connection ~ 1900 2300
Wire Wire Line
	750  2050 950  2050
Wire Wire Line
	750  950  950  950 
Wire Wire Line
	7850 1400 7850 1500
Wire Wire Line
	7200 1700 7550 1700
Wire Wire Line
	6100 2000 6450 2000
Wire Wire Line
	6750 1700 6750 1800
Wire Wire Line
	6750 2200 6750 2300
Wire Notes Line
	8100 600  7150 600 
Wire Notes Line
	8100 600  8100 2100
Wire Notes Line
	8100 2100 7150 2100
Wire Notes Line
	7150 2100 7150 600 
Wire Wire Line
	7400 3450 7750 3450
Wire Wire Line
	8550 3250 8650 3250
Wire Wire Line
	8550 2950 8650 2950
Wire Wire Line
	6750 4400 6600 4400
Connection ~ 7700 4300
Connection ~ 7350 4300
Text Notes 5100 1600 0    60   ~ 0
Green
Text Notes 6400 1550 0    60   ~ 0
Red
Text Notes 3900 1550 0    60   ~ 0
Blue
Text Label 7400 3450 0    60   ~ 0
GPIO17
Text Label 8650 3350 0    60   ~ 0
GPIO15
Text Label 8650 3250 0    60   ~ 0
GPIO14
Text Label 7400 3550 0    60   ~ 0
GPIO21
Text Notes 3650 900  0    60   ~ 0
Status LED\n\nPower/Ready
$Comp
L LED D1
U 1 1 5111697A
P 4300 1500
F 0 "D1" H 4300 1600 50  0000 C CNN
F 1 "LED" H 4300 1400 50  0000 C CNN
	1    4300 1500
	0    1    1    0   
$EndComp
Text Label 4300 750  0    60   ~ 0
3v3
Text Label 4300 2300 0    60   ~ 0
0v
$Comp
L NPN Q1
U 1 1 51116979
P 4200 2000
F 0 "Q1" H 4200 1850 50  0000 R CNN
F 1 "NPN" H 4200 2150 50  0000 R CNN
	1    4200 2000
	1    0    0    -1  
$EndComp
$Comp
L R R5
U 1 1 51116978
P 4300 1000
F 0 "R5" V 4380 1000 50  0000 C CNN
F 1 "470R" V 4300 1000 50  0000 C CNN
	1    4300 1000
	1    0    0    -1  
$EndComp
Text Label 3650 2000 0    60   ~ 0
GPIO15
Text Label 10050 1050 0    60   ~ 0
5v
Text Label 8650 2950 0    60   ~ 0
5v
Text Label 4900 2000 0    60   ~ 0
GPIO14
$Comp
L R R6
U 1 1 511168D2
P 5550 1000
F 0 "R6" V 5630 1000 50  0000 C CNN
F 1 "470R" V 5550 1000 50  0000 C CNN
	1    5550 1000
	1    0    0    -1  
$EndComp
$Comp
L NPN Q2
U 1 1 511168D1
P 5450 2000
F 0 "Q2" H 5450 1850 50  0000 R CNN
F 1 "NPN" H 5450 2150 50  0000 R CNN
	1    5450 2000
	1    0    0    -1  
$EndComp
Text Label 5550 2300 0    60   ~ 0
0v
Text Label 5550 750  0    60   ~ 0
3v3
$Comp
L LED D2
U 1 1 511168D0
P 5550 1500
F 0 "D2" H 5550 1600 50  0000 C CNN
F 1 "LED" H 5550 1400 50  0000 C CNN
	1    5550 1500
	0    1    1    0   
$EndComp
Text Notes 4900 900  0    60   ~ 0
Status LED\n\nProcess
Text Notes 6100 900  0    60   ~ 0
Status LED\n\nError
Text Notes 7200 700  0    60   ~ 0
Discharge Path
$Comp
L LED D3
U 1 1 5111684E
P 6750 1500
F 0 "D3" H 6750 1600 50  0000 C CNN
F 1 "LED" H 6750 1400 50  0000 C CNN
	1    6750 1500
	0    1    1    0   
$EndComp
Text Label 6750 750  0    60   ~ 0
3v3
Text Label 6750 2300 0    60   ~ 0
0v
$Comp
L NPN Q3
U 1 1 5111683A
P 6650 2000
F 0 "Q3" H 6650 1850 50  0000 R CNN
F 1 "NPN" H 6650 2150 50  0000 R CNN
	1    6650 2000
	1    0    0    -1  
$EndComp
$Comp
L R R7
U 1 1 51116839
P 6750 1000
F 0 "R7" V 6830 1000 50  0000 C CNN
F 1 "470R" V 6750 1000 50  0000 C CNN
	1    6750 1000
	1    0    0    -1  
$EndComp
Text Label 6100 2000 0    60   ~ 0
GPIO21
Text Label 7200 1700 0    60   ~ 0
GPIO17
$Comp
L R R9
U 1 1 511167C0
P 7850 1150
F 0 "R9" V 7930 1150 50  0000 C CNN
F 1 "14R" V 7850 1150 50  0000 C CNN
	1    7850 1150
	1    0    0    -1  
$EndComp
$Comp
L NPN Q4
U 1 1 511167B2
P 7750 1700
F 0 "Q4" H 7750 1550 50  0000 R CNN
F 1 "NPN" H 7750 1850 50  0000 R CNN
	1    7750 1700
	1    0    0    -1  
$EndComp
Text Label 7850 2000 0    60   ~ 0
0v
Text Label 7850 800  0    60   ~ 0
Batt
$Comp
L R R3
U 1 1 511166C4
P 1550 2300
F 0 "R3" V 1630 2300 50  0000 C CNN
F 1 "1k" V 1550 2300 50  0000 C CNN
	1    1550 2300
	0    -1   -1   0   
$EndComp
$Comp
L C C3
U 1 1 511166C3
P 1900 2500
F 0 "C3" H 1950 2600 50  0000 L CNN
F 1 "22uF" H 1950 2400 50  0000 L CNN
	1    1900 2500
	1    0    0    -1  
$EndComp
Text Label 2100 2700 0    60   ~ 0
0v
Text Label 2100 2300 0    60   ~ 0
CH2
Text Label 2100 2850 0    60   ~ 0
CH3
Text Label 2100 3250 0    60   ~ 0
0v
$Comp
L C C4
U 1 1 511166C2
P 1900 3050
F 0 "C4" H 1950 3150 50  0000 L CNN
F 1 "22uF" H 1950 2950 50  0000 L CNN
	1    1900 3050
	1    0    0    -1  
$EndComp
$Comp
L R R4
U 1 1 511166C1
P 1550 2850
F 0 "R4" V 1630 2850 50  0000 C CNN
F 1 "1k" V 1550 2850 50  0000 C CNN
	1    1550 2850
	0    -1   -1   0   
$EndComp
$Comp
L R R2
U 1 1 511166B5
P 1550 1750
F 0 "R2" V 1630 1750 50  0000 C CNN
F 1 "1k" V 1550 1750 50  0000 C CNN
	1    1550 1750
	0    -1   -1   0   
$EndComp
$Comp
L C C2
U 1 1 511166B4
P 1900 1950
F 0 "C2" H 1950 2050 50  0000 L CNN
F 1 "22uF" H 1950 1850 50  0000 L CNN
	1    1900 1950
	1    0    0    -1  
$EndComp
Text Label 2100 2150 0    60   ~ 0
0v
Text Label 2100 1750 0    60   ~ 0
CH1
Text Label 2100 1200 0    60   ~ 0
CH0
Text Label 2100 1600 0    60   ~ 0
0v
$Comp
L C C1
U 1 1 51116289
P 1900 1400
F 0 "C1" H 1950 1500 50  0000 L CNN
F 1 "22uF" H 1950 1300 50  0000 L CNN
	1    1900 1400
	1    0    0    -1  
$EndComp
$Comp
L R R1
U 1 1 51116282
P 1550 1200
F 0 "R1" V 1630 1200 50  0000 C CNN
F 1 "1k" V 1550 1200 50  0000 C CNN
	1    1550 1200
	0    -1   -1   0   
$EndComp
Text Notes 10100 1350 0    60   ~ 0
Fit PSU as far\nfrom analogue\ncircuitry as possible
Text Notes 9800 5650 0    60   ~ 0
Fit one on PCB and\none inside battery pack
Text Notes 600  650  0    60   ~ 0
Set these pots so that the output (CH*)\ndoes not exceed 3 volts at any state of\ncharge. For Ni-CAD/NiMH cells about 1.5v/cell 
Text Label 750  2050 0    60   ~ 0
B2
Text Label 950  2550 0    60   ~ 0
0v
$Comp
L POT RV3
U 1 1 511160BB
P 950 2300
F 0 "RV3" H 950 2200 50  0000 C CNN
F 1 "4k7" H 950 2300 50  0000 C CNN
	1    950  2300
	0    1    1    0   
$EndComp
$Comp
L POT RV4
U 1 1 511160BA
P 950 2850
F 0 "RV4" H 950 2750 50  0000 C CNN
F 1 "4k7" H 950 2850 50  0000 C CNN
	1    950  2850
	0    1    1    0   
$EndComp
Text Label 950  3100 0    60   ~ 0
0v
Text Label 750  2600 0    60   ~ 0
B3
Text Label 750  1500 0    60   ~ 0
B1
Text Label 950  2000 0    60   ~ 0
0v
$Comp
L POT RV2
U 1 1 511160B2
P 950 1750
F 0 "RV2" H 950 1650 50  0000 C CNN
F 1 "4k7" H 950 1750 50  0000 C CNN
	1    950  1750
	0    1    1    0   
$EndComp
$Comp
L POT RV1
U 1 1 51115FBD
P 950 1200
F 0 "RV1" H 950 1100 50  0000 C CNN
F 1 "4k7" H 950 1200 50  0000 C CNN
	1    950  1200
	0    1    1    0   
$EndComp
Text Notes 750  7100 0    60   ~ 0
Pin 9 & Pin 5 should be joined\nat the battery side of the plug
Text Notes 850  5700 0    60   ~ 0
Pin 1 is the negative\nend of the battery pack 
Text Label 950  1450 0    60   ~ 0
0v
Text Label 750  950  0    60   ~ 0
B0
Text Label 5100 4000 0    60   ~ 0
CH3
Text Label 5100 3900 0    60   ~ 0
CH2
Text Label 5100 3800 0    60   ~ 0
CH1
Text Label 1800 6700 0    60   ~ 0
Batt
Text Label 1600 6800 0    60   ~ 0
B3
Text Label 1600 6600 0    60   ~ 0
B2
Text Label 1600 6400 0    60   ~ 0
B1
Text Label 1600 6200 0    60   ~ 0
B0
Text Label 1600 6000 0    60   ~ 0
0v
Text Label 1800 6500 0    60   ~ 0
3v3
Text Label 1800 6300 0    60   ~ 0
1WireData
Text Label 1800 6100 0    60   ~ 0
0v
$Comp
L DB9 J1
U 1 1 51115E7A
P 1050 6400
F 0 "J1" H 1050 6950 70  0000 C CNN
F 1 "DB9" H 1050 5850 70  0000 C CNN
	1    1050 6400
	-1   0    0    1   
$EndComp
Text Label 6350 3250 0    60   ~ 0
1WireData
$Comp
L R R8
U 1 1 51115D28
P 6900 3000
F 0 "R8" V 6980 3000 50  0000 C CNN
F 1 "4k7" V 6900 3000 50  0000 C CNN
	1    6900 3000
	1    0    0    -1  
$EndComp
Text Label 5100 3700 0    60   ~ 0
CH0
Text Notes 8550 800  0    60   ~ 0
Option for board-powered RPI
$Comp
L C C8
U 1 1 51115C3C
P 9100 1250
F 0 "C8" H 9150 1350 50  0000 L CNN
F 1 "220uF" H 9150 1150 50  0000 L CNN
	1    9100 1250
	1    0    0    -1  
$EndComp
Text Notes 8300 4750 0    60   ~ 0
Bypass Capacitor\nPut as close to\nADC as possible
$Comp
L C C7
U 1 1 51115BE3
P 8250 4500
F 0 "C7" H 8300 4600 50  0000 L CNN
F 1 "0.1uF" H 8300 4400 50  0000 L CNN
	1    8250 4500
	1    0    0    -1  
$EndComp
$Comp
L C C6
U 1 1 51115B90
P 7700 4500
F 0 "C6" H 7750 4600 50  0000 L CNN
F 1 "0.047uF" H 7750 4400 50  0000 L CNN
	1    7700 4500
	1    0    0    -1  
$EndComp
$Comp
L C C5
U 1 1 51115B87
P 7350 4500
F 0 "C5" H 7400 4600 50  0000 L CNN
F 1 "4.7uF" H 7400 4400 50  0000 L CNN
	1    7350 4500
	1    0    0    -1  
$EndComp
$Comp
L TST P2
U 1 1 51115B21
P 7250 5200
F 0 "P2" H 7250 5500 40  0000 C CNN
F 1 "TST" H 7250 5450 30  0000 C CNN
	1    7250 5200
	1    0    0    -1  
$EndComp
Text Label 7750 4300 0    60   ~ 0
0v
$Comp
L CONN_2 P4
U 1 1 51115A55
P 8500 1150
F 0 "P4" V 8450 1150 40  0000 C CNN
F 1 "CONN_2" V 8550 1150 40  0000 C CNN
	1    8500 1150
	-1   0    0    1   
$EndComp
Text Label 8650 3150 0    60   ~ 0
0v
Text Label 9650 1500 0    60   ~ 0
0v
Text Label 7450 2950 0    60   ~ 0
3v3
$Comp
L LM7805 U2
U 1 1 511159E5
P 9650 1100
F 0 "U2" H 9800 904 60  0000 C CNN
F 1 "LM7805" H 9650 1300 60  0000 C CNN
	1    9650 1100
	1    0    0    -1  
$EndComp
Text Notes 3150 5800 0    60   ~ 0
This connector is a construct\nto get two physical packages\non the same board. It doesn't\nmean that a 20 pin off-board\nconnector is required!
$Comp
L CONN_20 P1
U 1 1 511158F9
P 3650 4650
F 0 "P1" V 3600 4650 60  0000 C CNN
F 1 "CONN_20" V 3700 4650 60  0000 C CNN
	1    3650 4650
	-1   0    0    -1  
$EndComp
Text Label 9700 6100 0    60   ~ 0
0v
Text Label 9400 6000 0    60   ~ 0
1WireData
Text Label 9700 5900 0    60   ~ 0
3v3
$Comp
L DS18B20 U3
U 1 1 511158B8
P 10500 6300
F 0 "U3" H 10450 6350 60  0000 C CNN
F 1 "DS18B20" V 10700 6500 60  0000 C CNN
	1    10500 6300
	1    0    0    -1  
$EndComp
$Comp
L CONN_13X2 P3
U 1 1 51115847
P 8150 3550
F 0 "P3" H 8150 4250 60  0000 C CNN
F 1 "CONN_13X2" V 8150 3550 50  0000 C CNN
	1    8150 3550
	1    0    0    -1  
$EndComp
$Comp
L MAX146 U1
U 1 1 5111583C
P 5900 4250
F 0 "U1" V 5950 4500 60  0000 C CNN
F 1 "MAX146" H 5950 4900 60  0000 C CNN
	1    5900 4250
	1    0    0    -1  
$EndComp
$EndSCHEMATC
